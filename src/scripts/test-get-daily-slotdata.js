'use strict';var __importDefault=this&&this['__importDefault']||function(_0x4f3f2a){return _0x4f3f2a&&_0x4f3f2a['__esModule']?_0x4f3f2a:{'default':_0x4f3f2a};};Object['defineProperty'](exports,'__esModule',{'value':!![]});const mongoose_1=__importDefault(require('mongoose')),logger_1=require('../utils/logger'),data_access_1=__importDefault(require('../min-repo/data-access')),get_daily_slotdata_1=__importDefault(require('../min-repo/services/get-daily-slotdata')),config_1=__importDefault(require('../config/config')),connectDatabase=async _0x41faeb=>{try{const _0x2ee8bd={'autoCreate':!![],'keepAlive':!![],'retryReads':!![]};mongoose_1['default']['set']('strictQuery',!![]);const _0x256ca0=await mongoose_1['default']['connect'](_0x41faeb,_0x2ee8bd);_0x256ca0&&logger_1['logger']['info']('MongoDB\x20connected');}catch(_0x158df5){logger_1['logger']['error']('ConnectDatabase:\x20'+_0x158df5['message']);throw _0x158df5;}},extractSlotData=async()=>{},testGetDailySlotData=async()=>{try{logger_1['logger']['info']('Starting\x20getDailySlotData.extraDatas\x20script...'),logger_1['logger']['info']('Connecting\x20to\x20database...');if(!config_1['default']['DATABASE'])throw new Error('DATABASE\x20environment\x20variable\x20is\x20not\x20set');await connectDatabase(config_1['default']['DATABASE']),logger_1['logger']['info']('Loading\x20store\x20masters\x20from\x20database...');const _0x1a2770=await data_access_1['default']['storeMasterDB']['getStoreDatas'](0x14);logger_1['logger']['info']('Loaded\x20'+_0x1a2770['length']+'\x20stores');if(_0x1a2770['length']===0x0){logger_1['logger']['warn']('No\x20stores\x20found.\x20Please\x20seed\x20store\x20masters\x20first.');return;}logger_1['logger']['info']('Using\x20first\x20'+_0x1a2770['length']+'\x20stores\x20for\x20extraction'),'',logger_1['logger']['info']('Extracting\x20daily\x20slot\x20data\x20(model\x20names\x20per\x20store)...');const _0x48b9ea=Date['now'](),[_0x27ed0e,_0x357ba6]=await get_daily_slotdata_1['default']['extraDatas'](_0x1a2770,'2025-09-24'),_0x1adcc4=Date['now']()-_0x48b9ea;logger_1['logger']['info']('Saving\x20machine\x20models\x20to\x20database...');const _0x1467f3=Date['now'](),_0x434e2c=await data_access_1['default']['machineModelDB']['saveDatas'](_0x27ed0e),_0x2fd7f8=Date['now']()-_0x1467f3;logger_1['logger']['info']('Saved\x20machine\x20models\x20=>\x20inserted:\x20'+_0x434e2c['savedModels']+',','skipped:\x20'+_0x434e2c['skippedModels']+',\x20errors:\x20'+_0x434e2c['errors']+',','time:\x20'+(_0x2fd7f8/0x3e8)['toFixed'](0x1)+'s'),logger_1['logger']['info']('Saving\x20daily\x20slot\x20rows\x20to\x20database...');const _0x187a8c=Date['now'](),_0xb17114=await data_access_1['default']['dailySlotDataDB']['saveDatas'](_0x357ba6),_0x2f7a3d=Date['now']()-_0x187a8c;logger_1['logger']['info']('Saved\x20slot\x20rows\x20=>\x20inserted:\x20'+_0xb17114['savedRows']+',','skipped:\x20'+_0xb17114['skippedRows']+',\x20errors:\x20'+_0xb17114['errors']+',','time:\x20'+(_0x2f7a3d/0x3e8)['toFixed'](0x1)+'s'),logger_1['logger']['info']('Done!\x20Models:\x20'+_0x27ed0e['length'],'Slots:\x20'+_0x357ba6['length'],'Extract:\x20'+(_0x1adcc4/0x3e8)['toFixed'](0x1)+'s,\x20SaveModels:\x20'+(_0x2fd7f8/0x3e8)['toFixed'](0x1)+'s,\x20SaveSlots:\x20'+(_0x2f7a3d/0x3e8)['toFixed'](0x1)+'s');}catch(_0x558c3e){logger_1['logger']['error']('Failed\x20to\x20run\x20getDailySlotData.extraDatas:\x20'+_0x558c3e['message']),process['exit'](0x1);}finally{try{mongoose_1['default']['connection']['readyState']===0x1&&(await mongoose_1['default']['connection']['close'](),logger_1['logger']['info']('Database\x20connection\x20closed\x20successfully'));}catch(_0x683515){logger_1['logger']['error']('Error\x20closing\x20database\x20connection:\x20'+_0x683515['message']);}}};testGetDailySlotData();