'use strict';var __importDefault=this&&this['__importDefault']||function(_0x159cf6){return _0x159cf6&&_0x159cf6['__esModule']?_0x159cf6:{'default':_0x159cf6};};Object['defineProperty'](exports,'__esModule',{'value':!![]});const fs_1=__importDefault(require('fs')),path_1=__importDefault(require('path')),logger_1=require('../utils/logger'),data_access_1=__importDefault(require('../min-repo/data-access'));class DataSeeder{constructor(){this['areaMasterData']=[],this['prefectureModelData']=[],this['loadMasterData']();}['loadMasterData'](){try{const _0x163778=path_1['default']['join'](process['cwd'](),'src','config','area-master-list.json'),_0x184140=fs_1['default']['readFileSync'](_0x163778,'utf8');this['areaMasterData']=JSON['parse'](_0x184140);const _0x5e54fc=path_1['default']['join'](process['cwd'](),'src','config','prefecture-models-list.json'),_0x450e8e=fs_1['default']['readFileSync'](_0x5e54fc,'utf8');this['prefectureModelData']=JSON['parse'](_0x450e8e),logger_1['logger']['info']('Loaded\x20'+this['areaMasterData']['length']+'\x20area\x20masters\x20and\x20'+this['prefectureModelData']['length']+'\x20prefecture\x20models');}catch(_0x3a99ad){logger_1['logger']['error']('Error\x20loading\x20master\x20data:',_0x3a99ad['message']);throw _0x3a99ad;}}async['seedAreaMasters'](){try{logger_1['logger']['info']('Starting\x20area\x20master\x20seeding...');for(const _0x5182d6 of this['areaMasterData']){const _0x2bec3c=await data_access_1['default']['areaMasterDB']['findOne']({'filter':{'_id':_0x5182d6['_id']}});!_0x2bec3c?(await data_access_1['default']['areaMasterDB']['create'](_0x5182d6),logger_1['logger']['info']('Created\x20area\x20master:\x20'+_0x5182d6['a_name']+'\x20(ID:\x20'+_0x5182d6['_id']+')')):logger_1['logger']['info']('Area\x20master\x20already\x20exists:\x20'+_0x5182d6['a_name']+'\x20(ID:\x20'+_0x5182d6['_id']+')');}logger_1['logger']['info']('Area\x20master\x20seeding\x20completed');}catch(_0x1aecbd){logger_1['logger']['error']('Error\x20seeding\x20area\x20masters:',_0x1aecbd['message']);throw _0x1aecbd;}}async['seedPrefectureModels'](){try{logger_1['logger']['info']('Starting\x20prefecture\x20model\x20seeding...');for(const _0x243a6d of this['prefectureModelData']){const _0x316668=await data_access_1['default']['prefectureModelDB']['findOne']({'filter':{'_id':_0x243a6d['_id']}});!_0x316668?(await data_access_1['default']['prefectureModelDB']['create'](_0x243a6d),logger_1['logger']['info']('Created\x20prefecture\x20model:\x20'+_0x243a6d['p_name']+'\x20(ID:\x20'+_0x243a6d['_id']+')')):logger_1['logger']['info']('Prefecture\x20model\x20already\x20exists:\x20'+_0x243a6d['p_name']+'\x20(ID:\x20'+_0x243a6d['_id']+')');}logger_1['logger']['info']('Prefecture\x20model\x20seeding\x20completed');}catch(_0xe3d372){logger_1['logger']['error']('Error\x20seeding\x20prefecture\x20models:',_0xe3d372['message']);throw _0xe3d372;}}async['seedAllMasterData'](){try{logger_1['logger']['info']('Starting\x20master\x20data\x20seeding...'),await this['seedAreaMasters'](),await this['seedPrefectureModels'](),logger_1['logger']['info']('All\x20master\x20data\x20seeding\x20completed\x20successfully');}catch(_0xfae1e3){logger_1['logger']['error']('Error\x20in\x20master\x20data\x20seeding:',_0xfae1e3['message']);throw _0xfae1e3;}}['getAreaMasterById'](_0x3bd6c7){return this['areaMasterData']['find'](_0x54f8e5=>_0x54f8e5['_id']===_0x3bd6c7);}['getPrefectureById'](_0x4eb521){return this['prefectureModelData']['find'](_0x1e6709=>_0x1e6709['_id']===_0x4eb521);}['getPrefecturesByAreaId'](_0x40b7f0){return this['prefectureModelData']['filter'](_0x54edd5=>_0x54edd5['a_ref_id']===_0x40b7f0);}['getAreaMasterByName'](_0x5d0882){return this['areaMasterData']['find'](_0x427c4c=>_0x427c4c['a_name']===_0x5d0882);}['getPrefectureByName'](_0x131613){return this['prefectureModelData']['find'](_0x54112d=>_0x54112d['p_name']===_0x131613);}['getAllAreaMasters'](){return[...this['areaMasterData']];}['getAllPrefectureModels'](){return[...this['prefectureModelData']];}}exports['default']=DataSeeder;