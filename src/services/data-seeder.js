'use strict';var __importDefault=this&&this['__importDefault']||function(_0x124157){return _0x124157&&_0x124157['__esModule']?_0x124157:{'default':_0x124157};};Object['defineProperty'](exports,'__esModule',{'value':!![]});const fs_1=__importDefault(require('fs')),path_1=__importDefault(require('path')),logger_1=require('../utils/logger'),data_access_1=__importDefault(require('../min-repo/data-access'));class DataSeeder{constructor(){this['areaMasterData']=[],this['prefectureModelData']=[],this['loadMasterData']();}['loadMasterData'](){try{const _0x449d26=path_1['default']['join'](process['cwd'](),'src','config','area-master-list.json'),_0x37a48d=fs_1['default']['readFileSync'](_0x449d26,'utf8');this['areaMasterData']=JSON['parse'](_0x37a48d);const _0x266f07=path_1['default']['join'](process['cwd'](),'src','config','prefecture-models-list.json'),_0x394ac7=fs_1['default']['readFileSync'](_0x266f07,'utf8');this['prefectureModelData']=JSON['parse'](_0x394ac7),logger_1['logger']['info']('Loaded\x20'+this['areaMasterData']['length']+'\x20area\x20masters\x20and\x20'+this['prefectureModelData']['length']+'\x20prefecture\x20models');}catch(_0x94d7f9){logger_1['logger']['error']('Error\x20loading\x20master\x20data:',_0x94d7f9['message']);throw _0x94d7f9;}}async['seedAreaMasters'](){try{logger_1['logger']['info']('Starting\x20area\x20master\x20seeding...');for(const _0x3be2ff of this['areaMasterData']){const _0x34ed5c=await data_access_1['default']['areaMasterDB']['findOne']({'filter':{'_id':_0x3be2ff['_id']}});!_0x34ed5c?(await data_access_1['default']['areaMasterDB']['create'](_0x3be2ff),logger_1['logger']['info']('Created\x20area\x20master:\x20'+_0x3be2ff['a_name']+'\x20(ID:\x20'+_0x3be2ff['_id']+')')):logger_1['logger']['info']('Area\x20master\x20already\x20exists:\x20'+_0x3be2ff['a_name']+'\x20(ID:\x20'+_0x3be2ff['_id']+')');}logger_1['logger']['info']('Area\x20master\x20seeding\x20completed');}catch(_0x3f99cf){logger_1['logger']['error']('Error\x20seeding\x20area\x20masters:',_0x3f99cf['message']);throw _0x3f99cf;}}async['seedPrefectureModels'](){try{logger_1['logger']['info']('Starting\x20prefecture\x20model\x20seeding...');for(const _0x226ad3 of this['prefectureModelData']){const _0xa3b955=await data_access_1['default']['prefectureModelDB']['findOne']({'filter':{'_id':_0x226ad3['_id']}});!_0xa3b955?(await data_access_1['default']['prefectureModelDB']['create'](_0x226ad3),logger_1['logger']['info']('Created\x20prefecture\x20model:\x20'+_0x226ad3['p_name']+'\x20(ID:\x20'+_0x226ad3['_id']+')')):logger_1['logger']['info']('Prefecture\x20model\x20already\x20exists:\x20'+_0x226ad3['p_name']+'\x20(ID:\x20'+_0x226ad3['_id']+')');}logger_1['logger']['info']('Prefecture\x20model\x20seeding\x20completed');}catch(_0x1a5c7f){logger_1['logger']['error']('Error\x20seeding\x20prefecture\x20models:',_0x1a5c7f['message']);throw _0x1a5c7f;}}async['seedAllMasterData'](){try{logger_1['logger']['info']('Starting\x20master\x20data\x20seeding...'),await this['seedAreaMasters'](),await this['seedPrefectureModels'](),logger_1['logger']['info']('All\x20master\x20data\x20seeding\x20completed\x20successfully');}catch(_0x308754){logger_1['logger']['error']('Error\x20in\x20master\x20data\x20seeding:',_0x308754['message']);throw _0x308754;}}['getAreaMasterById'](_0x5b5beb){return this['areaMasterData']['find'](_0x5d0a34=>_0x5d0a34['_id']===_0x5b5beb);}['getPrefectureById'](_0x1abe0c){return this['prefectureModelData']['find'](_0x327c4d=>_0x327c4d['_id']===_0x1abe0c);}['getPrefecturesByAreaId'](_0x5e1094){return this['prefectureModelData']['filter'](_0x1a6b02=>_0x1a6b02['a_ref_id']===_0x5e1094);}['getAreaMasterByName'](_0x4c97f0){return this['areaMasterData']['find'](_0x56a47e=>_0x56a47e['a_name']===_0x4c97f0);}['getPrefectureByName'](_0x5bd93e){return this['prefectureModelData']['find'](_0x1ef207=>_0x1ef207['p_name']===_0x5bd93e);}['getAllAreaMasters'](){return[...this['areaMasterData']];}['getAllPrefectureModels'](){return[...this['prefectureModelData']];}}exports['default']=DataSeeder;