'use strict';var __importDefault=this&&this['__importDefault']||function(_0x18a435){return _0x18a435&&_0x18a435['__esModule']?_0x18a435:{'default':_0x18a435};};Object['defineProperty'](exports,'__esModule',{'value':!![]});const fs_1=__importDefault(require('fs')),path_1=__importDefault(require('path')),logger_1=require('../utils/logger'),data_access_1=__importDefault(require('../min-repo/data-access'));class DataSeeder{constructor(){this['areaMasterData']=[],this['prefectureModelData']=[],this['loadMasterData']();}['loadMasterData'](){try{const _0x1479b2=path_1['default']['join'](process['cwd'](),'src','config','area-master-list.json'),_0x4039a1=fs_1['default']['readFileSync'](_0x1479b2,'utf8');this['areaMasterData']=JSON['parse'](_0x4039a1);const _0x854d7b=path_1['default']['join'](process['cwd'](),'src','config','prefecture-models-list.json'),_0x41309a=fs_1['default']['readFileSync'](_0x854d7b,'utf8');this['prefectureModelData']=JSON['parse'](_0x41309a),logger_1['logger']['info']('Loaded\x20'+this['areaMasterData']['length']+'\x20area\x20masters\x20and\x20'+this['prefectureModelData']['length']+'\x20prefecture\x20models');}catch(_0x5bccc0){logger_1['logger']['error']('Error\x20loading\x20master\x20data:',_0x5bccc0['message']);throw _0x5bccc0;}}async['seedAreaMasters'](){try{logger_1['logger']['info']('Starting\x20area\x20master\x20seeding...');for(const _0x40c12c of this['areaMasterData']){const _0x2764fc=await data_access_1['default']['areaMasterDB']['findOne']({'filter':{'_id':_0x40c12c['_id']}});!_0x2764fc?(await data_access_1['default']['areaMasterDB']['create'](_0x40c12c),logger_1['logger']['info']('Created\x20area\x20master:\x20'+_0x40c12c['a_name']+'\x20(ID:\x20'+_0x40c12c['_id']+')')):logger_1['logger']['info']('Area\x20master\x20already\x20exists:\x20'+_0x40c12c['a_name']+'\x20(ID:\x20'+_0x40c12c['_id']+')');}logger_1['logger']['info']('Area\x20master\x20seeding\x20completed');}catch(_0x5a55e8){logger_1['logger']['error']('Error\x20seeding\x20area\x20masters:',_0x5a55e8['message']);throw _0x5a55e8;}}async['seedPrefectureModels'](){try{logger_1['logger']['info']('Starting\x20prefecture\x20model\x20seeding...');for(const _0x4e7c5b of this['prefectureModelData']){const _0x414f8f=await data_access_1['default']['prefectureModelDB']['findOne']({'filter':{'_id':_0x4e7c5b['_id']}});!_0x414f8f?(await data_access_1['default']['prefectureModelDB']['create'](_0x4e7c5b),logger_1['logger']['info']('Created\x20prefecture\x20model:\x20'+_0x4e7c5b['p_name']+'\x20(ID:\x20'+_0x4e7c5b['_id']+')')):logger_1['logger']['info']('Prefecture\x20model\x20already\x20exists:\x20'+_0x4e7c5b['p_name']+'\x20(ID:\x20'+_0x4e7c5b['_id']+')');}logger_1['logger']['info']('Prefecture\x20model\x20seeding\x20completed');}catch(_0x5d9a32){logger_1['logger']['error']('Error\x20seeding\x20prefecture\x20models:',_0x5d9a32['message']);throw _0x5d9a32;}}async['seedAllMasterData'](){try{logger_1['logger']['info']('Starting\x20master\x20data\x20seeding...'),await this['seedAreaMasters'](),await this['seedPrefectureModels'](),logger_1['logger']['info']('All\x20master\x20data\x20seeding\x20completed\x20successfully');}catch(_0x45c105){logger_1['logger']['error']('Error\x20in\x20master\x20data\x20seeding:',_0x45c105['message']);throw _0x45c105;}}['getAreaMasterById'](_0x17ec0){return this['areaMasterData']['find'](_0x54a1ab=>_0x54a1ab['_id']===_0x17ec0);}['getPrefectureById'](_0x22be81){return this['prefectureModelData']['find'](_0x5a6386=>_0x5a6386['_id']===_0x22be81);}['getPrefecturesByAreaId'](_0x25f7f4){return this['prefectureModelData']['filter'](_0x308175=>_0x308175['a_ref_id']===_0x25f7f4);}['getAreaMasterByName'](_0x3b8a37){return this['areaMasterData']['find'](_0xdd2505=>_0xdd2505['a_name']===_0x3b8a37);}['getPrefectureByName'](_0x493b7a){return this['prefectureModelData']['find'](_0x28f158=>_0x28f158['p_name']===_0x493b7a);}['getAllAreaMasters'](){return[...this['areaMasterData']];}['getAllPrefectureModels'](){return[...this['prefectureModelData']];}}exports['default']=DataSeeder;