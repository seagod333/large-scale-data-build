'use strict';var __importDefault=this&&this['__importDefault']||function(_0x36fc4f){return _0x36fc4f&&_0x36fc4f['__esModule']?_0x36fc4f:{'default':_0x36fc4f};};Object['defineProperty'](exports,'__esModule',{'value':!![]});const fs_1=__importDefault(require('fs')),path_1=__importDefault(require('path')),logger_1=require('../utils/logger'),data_access_1=__importDefault(require('../min-repo/data-access'));class DataSeeder{constructor(){this['areaMasterData']=[],this['prefectureModelData']=[],this['loadMasterData']();}['loadMasterData'](){try{const _0x3feaac=path_1['default']['join'](process['cwd'](),'src','config','area-master-list.json'),_0x521862=fs_1['default']['readFileSync'](_0x3feaac,'utf8');this['areaMasterData']=JSON['parse'](_0x521862);const _0x284544=path_1['default']['join'](process['cwd'](),'src','config','prefecture-models-list.json'),_0x226b37=fs_1['default']['readFileSync'](_0x284544,'utf8');this['prefectureModelData']=JSON['parse'](_0x226b37),logger_1['logger']['info']('Loaded\x20'+this['areaMasterData']['length']+'\x20area\x20masters\x20and\x20'+this['prefectureModelData']['length']+'\x20prefecture\x20models');}catch(_0x4440cd){logger_1['logger']['error']('Error\x20loading\x20master\x20data:',_0x4440cd['message']);throw _0x4440cd;}}async['seedAreaMasters'](){try{logger_1['logger']['info']('Starting\x20area\x20master\x20seeding...');for(const _0x3cdf64 of this['areaMasterData']){const _0x4305e3=await data_access_1['default']['areaMasterDB']['findOne']({'filter':{'_id':_0x3cdf64['_id']}});!_0x4305e3?(await data_access_1['default']['areaMasterDB']['create'](_0x3cdf64),logger_1['logger']['info']('Created\x20area\x20master:\x20'+_0x3cdf64['a_name']+'\x20(ID:\x20'+_0x3cdf64['_id']+')')):logger_1['logger']['info']('Area\x20master\x20already\x20exists:\x20'+_0x3cdf64['a_name']+'\x20(ID:\x20'+_0x3cdf64['_id']+')');}logger_1['logger']['info']('Area\x20master\x20seeding\x20completed');}catch(_0x50d613){logger_1['logger']['error']('Error\x20seeding\x20area\x20masters:',_0x50d613['message']);throw _0x50d613;}}async['seedPrefectureModels'](){try{logger_1['logger']['info']('Starting\x20prefecture\x20model\x20seeding...');for(const _0x206caa of this['prefectureModelData']){const _0x5c557f=await data_access_1['default']['prefectureModelDB']['findOne']({'filter':{'_id':_0x206caa['_id']}});!_0x5c557f?(await data_access_1['default']['prefectureModelDB']['create'](_0x206caa),logger_1['logger']['info']('Created\x20prefecture\x20model:\x20'+_0x206caa['p_name']+'\x20(ID:\x20'+_0x206caa['_id']+')')):logger_1['logger']['info']('Prefecture\x20model\x20already\x20exists:\x20'+_0x206caa['p_name']+'\x20(ID:\x20'+_0x206caa['_id']+')');}logger_1['logger']['info']('Prefecture\x20model\x20seeding\x20completed');}catch(_0x5d0973){logger_1['logger']['error']('Error\x20seeding\x20prefecture\x20models:',_0x5d0973['message']);throw _0x5d0973;}}async['seedAllMasterData'](){try{logger_1['logger']['info']('Starting\x20master\x20data\x20seeding...'),await this['seedAreaMasters'](),await this['seedPrefectureModels'](),logger_1['logger']['info']('All\x20master\x20data\x20seeding\x20completed\x20successfully');}catch(_0x4f76ab){logger_1['logger']['error']('Error\x20in\x20master\x20data\x20seeding:',_0x4f76ab['message']);throw _0x4f76ab;}}['getAreaMasterById'](_0x11fe1d){return this['areaMasterData']['find'](_0x24c4ea=>_0x24c4ea['_id']===_0x11fe1d);}['getPrefectureById'](_0x4df119){return this['prefectureModelData']['find'](_0x2e2f9b=>_0x2e2f9b['_id']===_0x4df119);}['getPrefecturesByAreaId'](_0x4c7ac5){return this['prefectureModelData']['filter'](_0x25d41e=>_0x25d41e['a_ref_id']===_0x4c7ac5);}['getAreaMasterByName'](_0x5b53ef){return this['areaMasterData']['find'](_0x477894=>_0x477894['a_name']===_0x5b53ef);}['getPrefectureByName'](_0x56b4fa){return this['prefectureModelData']['find'](_0x59b402=>_0x59b402['p_name']===_0x56b4fa);}['getAllAreaMasters'](){return[...this['areaMasterData']];}['getAllPrefectureModels'](){return[...this['prefectureModelData']];}}exports['default']=DataSeeder;