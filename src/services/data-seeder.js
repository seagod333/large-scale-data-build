'use strict';var __importDefault=this&&this['__importDefault']||function(_0x4e386f){return _0x4e386f&&_0x4e386f['__esModule']?_0x4e386f:{'default':_0x4e386f};};Object['defineProperty'](exports,'__esModule',{'value':!![]});const fs_1=__importDefault(require('fs')),path_1=__importDefault(require('path')),logger_1=require('../utils/logger'),data_access_1=__importDefault(require('../min-repo/data-access'));class DataSeeder{constructor(){this['areaMasterData']=[],this['prefectureModelData']=[],this['loadMasterData']();}['loadMasterData'](){try{const _0x52a9e6=path_1['default']['join'](process['cwd'](),'src','config','area-master-list.json'),_0x3bdaa7=fs_1['default']['readFileSync'](_0x52a9e6,'utf8');this['areaMasterData']=JSON['parse'](_0x3bdaa7);const _0x57d126=path_1['default']['join'](process['cwd'](),'src','config','prefecture-models-list.json'),_0x5ce43d=fs_1['default']['readFileSync'](_0x57d126,'utf8');this['prefectureModelData']=JSON['parse'](_0x5ce43d),logger_1['logger']['info']('Loaded\x20'+this['areaMasterData']['length']+'\x20area\x20masters\x20and\x20'+this['prefectureModelData']['length']+'\x20prefecture\x20models');}catch(_0xa1b7a7){logger_1['logger']['error']('Error\x20loading\x20master\x20data:',_0xa1b7a7['message']);throw _0xa1b7a7;}}async['seedAreaMasters'](){try{logger_1['logger']['info']('Starting\x20area\x20master\x20seeding...');for(const _0x4c0576 of this['areaMasterData']){const _0x491cd4=await data_access_1['default']['areaMasterDB']['findOne']({'filter':{'_id':_0x4c0576['_id']}});!_0x491cd4?(await data_access_1['default']['areaMasterDB']['create'](_0x4c0576),logger_1['logger']['info']('Created\x20area\x20master:\x20'+_0x4c0576['a_name']+'\x20(ID:\x20'+_0x4c0576['_id']+')')):logger_1['logger']['info']('Area\x20master\x20already\x20exists:\x20'+_0x4c0576['a_name']+'\x20(ID:\x20'+_0x4c0576['_id']+')');}logger_1['logger']['info']('Area\x20master\x20seeding\x20completed');}catch(_0xa979e6){logger_1['logger']['error']('Error\x20seeding\x20area\x20masters:',_0xa979e6['message']);throw _0xa979e6;}}async['seedPrefectureModels'](){try{logger_1['logger']['info']('Starting\x20prefecture\x20model\x20seeding...');for(const _0xeef380 of this['prefectureModelData']){const _0x3c63f8=await data_access_1['default']['prefectureModelDB']['findOne']({'filter':{'_id':_0xeef380['_id']}});!_0x3c63f8?(await data_access_1['default']['prefectureModelDB']['create'](_0xeef380),logger_1['logger']['info']('Created\x20prefecture\x20model:\x20'+_0xeef380['p_name']+'\x20(ID:\x20'+_0xeef380['_id']+')')):logger_1['logger']['info']('Prefecture\x20model\x20already\x20exists:\x20'+_0xeef380['p_name']+'\x20(ID:\x20'+_0xeef380['_id']+')');}logger_1['logger']['info']('Prefecture\x20model\x20seeding\x20completed');}catch(_0x161e2c){logger_1['logger']['error']('Error\x20seeding\x20prefecture\x20models:',_0x161e2c['message']);throw _0x161e2c;}}async['seedAllMasterData'](){try{logger_1['logger']['info']('Starting\x20master\x20data\x20seeding...'),await this['seedAreaMasters'](),await this['seedPrefectureModels'](),logger_1['logger']['info']('All\x20master\x20data\x20seeding\x20completed\x20successfully');}catch(_0x1145b6){logger_1['logger']['error']('Error\x20in\x20master\x20data\x20seeding:',_0x1145b6['message']);throw _0x1145b6;}}['getAreaMasterById'](_0x162507){return this['areaMasterData']['find'](_0x255f3b=>_0x255f3b['_id']===_0x162507);}['getPrefectureById'](_0x5addca){return this['prefectureModelData']['find'](_0x24d483=>_0x24d483['_id']===_0x5addca);}['getPrefecturesByAreaId'](_0x4c0a23){return this['prefectureModelData']['filter'](_0x12d1b5=>_0x12d1b5['a_ref_id']===_0x4c0a23);}['getAreaMasterByName'](_0x375976){return this['areaMasterData']['find'](_0x480306=>_0x480306['a_name']===_0x375976);}['getPrefectureByName'](_0x2d2fed){return this['prefectureModelData']['find'](_0x2f2497=>_0x2f2497['p_name']===_0x2d2fed);}['getAllAreaMasters'](){return[...this['areaMasterData']];}['getAllPrefectureModels'](){return[...this['prefectureModelData']];}}exports['default']=DataSeeder;